<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Editor - Presentation Maker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root { color-scheme: light; }
      @keyframes floatBlob {
        0% { transform: translate3d(-10px,-6px,0) scale(1); }
        50% { transform: translate3d(6px,4px,0) scale(1.05); }
        100% { transform: translate3d(-6px,10px,0) scale(1.02); }
      }
      @keyframes shimmer {
        0% { opacity: 0.25; transform: translateX(-40%); }
        100% { opacity: 0.45; transform: translateX(60%); }
      }
      .blob-motion { animation: floatBlob 22s ease-in-out infinite alternate; }
      .toolbar-glow { position: relative; }
      .toolbar-glow::after {
        content: "";
        position: absolute;
        inset: 4px;
        border-radius: 28px;
        background: linear-gradient(135deg, rgba(16,185,129,0.12), rgba(14,165,233,0.08));
        opacity: 0.6;
        filter: blur(22px);
        pointer-events: none;
      }
      .toolbar-button {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 999px;
        border: 1px solid rgba(148,163,184,0.4);
        background: rgba(255,255,255,0.9);
        box-shadow: 0 6px 18px -12px rgba(16,118,110,0.45);
        transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
      }
      .toolbar-button:hover {
        transform: translateY(-1px);
        border-color: rgba(16,185,129,0.35);
        box-shadow: 0 10px 30px -18px rgba(16,118,110,0.45);
      }
      .toolbar-button svg { width: 16px; height: 16px; stroke-width: 1.7; }
      .stage-element {
        position: absolute;
        min-width: 160px;
        padding: 10px 18px;
        border-radius: 14px;
        background: rgba(255,255,255,0.95);
        border: 1px solid rgba(148,163,184,0.4);
        box-shadow: 0 18px 45px -30px rgba(16,118,110,0.55);
        cursor: move;
        transition: box-shadow 0.18s ease, border-color 0.18s ease, transform 0.18s ease;
      }
      .stage-element[data-selected="true"] {
        border-color: rgba(16,185,129,0.7);
        box-shadow: 0 24px 60px -28px rgba(16,118,110,0.6);
      }
      .stage-element:hover { transform: translateY(-1px); }
      .stage-text { outline: none; font-weight: 600; color: #1f2937; }
      .stage-placeholder {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        color: rgba(71,85,105,0.55);
        font-size: 0.95rem;
        pointer-events: none;
      }
      .slide-card::after {
        content: "";
        position: absolute;
        inset: 4px;
        border-radius: 12px;
        border: 1px dashed transparent;
        opacity: 0;
        transition: opacity 0.2s;
      }
      .slide-card:hover::after { border-color: rgba(16,185,129,0.45); opacity: 0.5; }
      .slide-handles {
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.2s;
      }
      .slide-card:hover .slide-handles { opacity: 1; }
      .canvas-shell {
        position: relative;
        border-radius: 26px;
        border: 1px solid rgba(148,163,184,0.35);
        background: rgba(255,255,255,0.88);
        backdrop-filter: blur(16px);
        box-shadow: 0 50px 120px -70px rgba(16,118,110,0.55), inset 0 1px 0 rgba(255,255,255,0.7);
      }
      .canvas-shell::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: linear-gradient(135deg, rgba(255,255,255,0.0), rgba(16,185,129,0.08));
        mix-blend-mode: soft-light;
        pointer-events: none;
      }
      .notes-card {
        border-radius: 18px;
        border: 1px solid rgba(148,163,184,0.35);
        background: rgba(255,255,255,0.8);
        backdrop-filter: blur(20px);
        box-shadow: 0 25px 70px -40px rgba(16,118,110,0.45);
      }
      .progress-track {
        position: relative;
        overflow: hidden;
      }
      .progress-track::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(120deg, rgba(16,185,129,0.4), rgba(14,165,233,0.4));
        animation: shimmer 3s linear infinite;
        opacity: 0.35;
      }
    </style>
  </head>
  <body class="min-h-screen bg-[#eef3fb] text-slate-900">
    <div class="relative flex h-screen flex-col overflow-hidden">
      <div class="pointer-events-none absolute inset-0 -z-10">
        <div class="blob-motion absolute -top-32 left-1/3 h-96 w-96 rounded-full bg-emerald-200/40 blur-3xl"></div>
        <div class="blob-motion absolute top-1/2 -left-20 h-80 w-80 rounded-full bg-sky-200/30 blur-[140px]"></div>
        <div class="blob-motion absolute bottom-0 right-0 h-96 w-96 translate-x-1/3 rounded-full bg-emerald-100/50 blur-[150px]"></div>
      </div>
      <!-- Primary menu bar -->
      <header class="border-b border-white/60 bg-white/80 backdrop-blur">
        <div class="toolbar-glow mx-auto flex w-full max-w-7xl items-center justify-between rounded-[30px] px-6 py-3">
          <div class="flex items-center gap-4">
            <div class="flex h-9 w-9 items-center justify-center rounded-full bg-gradient-to-br from-emerald-400 to-sky-400 text-sm font-semibold text-white shadow-lg shadow-emerald-200/60">PM</div>
            <div>
              <div class="text-sm font-semibold tracking-tight text-slate-800">Untitled presentation</div>
              <nav class="flex items-center gap-3 text-xs text-slate-500">
                <span class="font-medium text-emerald-600">File</span>
                <span class="hover:text-emerald-600">Edit</span>
                <span class="hover:text-emerald-600">View</span>
                <span class="hover:text-emerald-600">Insert</span>
                <span class="hover:text-emerald-600">Format</span>
                <span class="hover:text-emerald-600">Slide</span>
                <span class="hover:text-emerald-600">Arrange</span>
                <span class="hover:text-emerald-600">Tools</span>
                <span class="hover:text-emerald-600">Extensions</span>
                <span class="hover:text-emerald-600">Help</span>
              </nav>
              <div class="mt-1 flex items-center gap-2 text-[11px] text-emerald-600">
                <span class="relative flex h-2 w-2">
                  <span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-emerald-300 opacity-75"></span>
                  <span class="relative inline-flex h-2 w-2 rounded-full bg-emerald-500"></span>
                </span>
                <span>Live collaboration enabled</span>
            </div>
            </div>
          </div>
          <div class="flex items-center gap-3 text-sm">
            <button class="rounded-full border border-slate-200 bg-white/80 px-4 py-1 text-slate-600 shadow-sm transition hover:border-emerald-300 hover:text-emerald-600">Share</button>
            <div class="grid h-8 w-8 place-items-center rounded-full bg-gradient-to-br from-emerald-500 to-sky-500 text-sm font-semibold text-white shadow-lg">H</div>
              </div>
            </div>
      </header>

      <!-- Secondary toolbar -->
      <div class="border-b border-white/60 bg-white/65 backdrop-blur">
        <div class="mx-auto flex w-full max-w-7xl flex-wrap items-center gap-3 px-6 py-3 text-slate-600">
          <div class="flex items-center gap-2 rounded-full border border-slate-200 bg-white/90 px-3 py-1.5 shadow-sm">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-4 w-4 text-slate-400"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-4.35-4.35M18 10.5A7.5 7.5 0 1 1 3 10.5a7.5 7.5 0 0 1 15 0Z"/></svg>
            <input placeholder="Search the editor" class="w-40 bg-transparent text-xs text-slate-500 focus:outline-none" />
          </div>
          <div class="hidden h-5 w-px bg-slate-200 sm:block"></div>
          <div class="flex flex-wrap items-center gap-2">
            <button class="toolbar-button text-xs text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12h12"/><path stroke-linecap="round" stroke-linejoin="round" d="m8 7-5 5 5 5"/></svg><span>Undo</span></button>
            <button class="toolbar-button text-xs text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12H9"/><path stroke-linecap="round" stroke-linejoin="round" d="m16 7 5 5-5 5"/></svg><span>Redo</span></button>
            <button id="btn-add-text" class="toolbar-button text-xs text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M5 6h14"/><path stroke-linecap="round" stroke-linejoin="round" d="M8 6v12"/><path stroke-linecap="round" stroke-linejoin="round" d="M16 6v12"/><path stroke-linecap="round" stroke-linejoin="round" d="M5 18h14"/></svg><span>Text box</span></button>
            <button class="toolbar-button text-xs text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19V5"/><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14"/></svg><span>Line</span></button>
            <button class="toolbar-button text-xs text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><rect x="5" y="5" width="14" height="14" rx="2"/></svg><span>Shape</span></button>
            <button class="toolbar-button text-xs text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" d="M4 6h16"/><path stroke-linecap="round" d="M4 12h16"/><path stroke-linecap="round" d="M4 18h16"/></svg><span>Guides</span></button>
            <button class="toolbar-button text-xs text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4h16v16H4z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 13 2-2 3 4"/></svg><span>Image</span></button>
          </div>
          <div class="ml-auto flex items-center gap-2 text-xs">
            <button class="toolbar-button text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="M4 19h16"/><path stroke-linecap="round" stroke-linejoin="round" d="M4 5h16"/><path stroke-linecap="round" stroke-linejoin="round" d="M8 5v14"/></svg><span>Layout</span></button>
            <button class="toolbar-button text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="m3 3 18 18"/><path stroke-linecap="round" stroke-linejoin="round" d="M21 3 3 21"/></svg><span>Theme</span></button>
            <button class="toolbar-button text-slate-600"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"><path stroke-linecap="round" stroke-linejoin="round" d="m4 4 7.5 7.5L4 19"/><path stroke-linecap="round" stroke-linejoin="round" d="M20 4l-7.5 7.5L20 19"/></svg><span>Transition</span></button>
            </div>
          </div>
        </div>

      <!-- Workspace -->
      <div class="mx-auto flex w-full max-w-7xl flex-1 gap-4 px-6 py-4">
        <!-- Slides panel -->
        <aside class="flex w-48 flex-col">
          <button id="btn-add-slide" class="mb-3 flex h-20 items-center justify-center gap-2 rounded-xl border border-emerald-300 bg-white text-sm font-semibold text-emerald-600 shadow-sm transition hover:border-emerald-400 hover:bg-emerald-50">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" class="h-5 w-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14"/><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14"/></svg>
            <span>Add slide</span>
          </button>
          <ol id="slide-list" class="flex-1 space-y-3 overflow-y-auto pr-1 text-xs scrollbar-thin scrollbar-track-transparent scrollbar-thumb-emerald-200/70"></ol>
          </aside>

        <!-- Canvas area -->
        <section class="relative flex flex-1 flex-col items-center">
          <!-- horizontal ruler -->
          <div class="mt-1 flex h-6 w-full max-w-4xl items-end border-b border-slate-300 bg-white">
            <div class="flex flex-1 justify-between"></div>
              </div>
          <div class="flex w-full max-w-4xl flex-1">
            <!-- vertical ruler -->
            <div class="flex w-6 flex-col border-r border-slate-300 bg-white">
              <div class="flex flex-1 flex-col justify-between"></div>
            </div>
            <!-- slide -->
            <div class="relative flex flex-1 items-start justify-center bg-gradient-to-br from-slate-100 via-white to-emerald-50 py-6">
              <div class="canvas-shell mt-0 aspect-[4/3] w-[85%] max-w-3xl overflow-hidden">
                <div id="slide-stage" class="relative h-full w-full select-none">
                  <div id="stage-placeholder" class="stage-placeholder">
                    Use "Text box" or "Add slide" to start designing ‚ö°Ô∏è
                  </div>
                </div>
              </div>
                  </div>
                </div>
          <div class="mt-4 flex w-full max-w-3xl items-center gap-3">
            <div class="progress-track relative h-2 flex-1 overflow-hidden rounded-full bg-white/70 shadow-inner">
              <div id="progress-fill" class="relative h-full rounded-full bg-gradient-to-r from-emerald-400 to-sky-400"></div>
                </div>
            <span id="progress-label" class="text-xs font-medium text-slate-500">Slide 1 of 6</span>
                </div>
        </section>

        <!-- Properties panel -->
        <aside id="properties-panel" class="w-64 flex-shrink-0">
          <div class="sticky top-4 rounded-xl border border-white/60 bg-white/85 backdrop-blur shadow-lg">
            <div class="border-b border-slate-200/60 px-4 py-3">
              <h3 class="text-sm font-semibold text-slate-700">Properties</h3>
              <p id="properties-subtitle" class="mt-0.5 text-xs text-slate-500">No selection</p>
            </div>
            <div id="properties-content" class="p-4 space-y-4">
              <div class="text-center py-8 text-sm text-slate-400">
                Select an element to edit properties
              </div>
            </div>
          </div>
        </aside>
              </div>

      <!-- Speaker notes -->
      <footer class="border-t border-white/60 bg-white/75 backdrop-blur">
        <div class="mx-auto w-full max-w-4xl px-6 py-4 text-sm text-slate-500">
          <div class="notes-card flex items-center gap-3 px-4 py-3">
            <div class="grid h-8 w-8 place-items-center rounded-full bg-emerald-100 text-emerald-600">üìù</div>
                <div>
              <div class="text-xs font-semibold uppercase tracking-wide text-slate-400">Speaker notes</div>
              <div class="text-sm text-slate-500">Click to add speaker notes</div>
                </div>
              </div>
            </div>
      </footer>
    </div>

    <template id="slide-template">
      <li class="slide-card relative group rounded-xl border border-transparent bg-white/90 shadow-sm transition hover:border-emerald-300 hover:shadow-lg">
        <div class="relative aspect-[4/3] overflow-hidden rounded-lg bg-gradient-to-br from-white via-emerald-50 to-sky-50">
          <div class="absolute inset-1 rounded-lg border border-emerald-200/80"></div>
          <div class="slide-handles pointer-events-none absolute inset-1 flex items-center justify-between px-1">
            <span class="h-2 w-2 rounded-sm border border-white/70 bg-emerald-300/80 shadow"></span>
            <span class="h-2 w-2 rounded-sm border border-white/70 bg-emerald-300/80 shadow"></span>
          </div>
          <div class="slide-handles pointer-events-none absolute inset-1 flex flex-col justify-between py-1">
            <span class="mx-auto h-2 w-2 rounded-sm border border-white/70 bg-emerald-300/80 shadow"></span>
            <span class="mx-auto h-2 w-2 rounded-sm border border-white/70 bg-emerald-300/80 shadow"></span>
          </div>
        </div>
        <div class="flex items-center justify-between px-2 py-1 text-[11px]">
          <span class="font-medium text-slate-600">Slide <span data-index></span></span>
          <div class="flex gap-1 opacity-0 transition group-hover:opacity-100">
            <button class="rounded px-1 text-slate-500 hover:bg-emerald-50 hover:text-emerald-600">‚ßâ</button>
            <button class="rounded px-1 text-slate-500 hover:bg-emerald-50 hover:text-rose-500">‚úï</button>
          </div>
        </div>
      </li>
    </template>

    <script>
      const slideList = document.getElementById('slide-list')
      const slideTemplate = document.getElementById('slide-template')
      const progressFill = document.getElementById('progress-fill')
      const progressLabel = document.getElementById('progress-label')
      const addSlideBtn = document.getElementById('btn-add-slide')
      const addTextBtn = document.getElementById('btn-add-text')
      const stage = document.getElementById('slide-stage')
      const stagePlaceholder = document.getElementById('stage-placeholder')
      const propertiesContent = document.getElementById('properties-content')
      const propertiesSubtitle = document.getElementById('properties-subtitle')

      const state = {
        slides: [ { id: 'slide-1', elements: [] } ],
        current: 0,
        selected: null,
        counter: 0,
        isEditing: false
      }

      function updateProgress() {
        const total = state.slides.length || 1
        const active = state.current + 1
        const ratio = Math.max(active / total, 1 / total)
        progressFill.style.width = `${ratio * 100}%`
        progressLabel.textContent = `Slide ${active} of ${total}`
      }

      function renderSlides() {
        slideList.innerHTML = ''
        state.slides.forEach((slide, index) => {
          const clone = slideTemplate.content.firstElementChild.cloneNode(true)
          clone.dataset.index = index
          clone.querySelector('[data-index]').textContent = index + 1
          if (index === state.current) {
            clone.classList.add('ring-2', 'ring-emerald-400')
          }
          clone.addEventListener('click', () => {
            state.isEditing = false
            state.current = index
            state.selected = null
            renderSlides()
            renderStage()
            renderProperties()
          })
          slideList.appendChild(clone)
        })
        updateProgress()
      }

      function renderStage() {
        const slide = state.slides[state.current]
        // remove current elements
        stage.querySelectorAll('[data-element]').forEach((el) => el.remove())

        if (!slide.elements.length) {
          stagePlaceholder.classList.remove('hidden')
          return
        }
        stagePlaceholder.classList.add('hidden')

        slide.elements.forEach((element) => {
          const node = document.createElement('div')
          node.className = 'stage-element'
          node.dataset.element = element.id
          node.style.left = `${element.x}px`
          node.style.top = `${element.y}px`
          node.dataset.selected = state.selected === element.id

          const textNode = document.createElement('div')
          textNode.className = 'stage-text'
          textNode.textContent = element.text
          textNode.style.fontSize = `${element.fontSize || 16}px`
          textNode.style.fontFamily = element.fontFamily || 'Inter, sans-serif'
          textNode.style.fontWeight = element.fontWeight || 600
          textNode.style.color = element.color || '#1f2937'
          textNode.style.textAlign = element.textAlign || 'left'
          node.appendChild(textNode)

          node.addEventListener('mousedown', (event) => startDrag(event, element, node))
          node.addEventListener('click', (event) => {
            event.stopPropagation()
            state.selected = element.id
            renderStage()
            renderProperties()
          })
          node.addEventListener('dblclick', (event) => {
            event.stopPropagation()
            state.selected = element.id
            beginEditingText(element.id)
            renderProperties()
          })
          textNode.addEventListener('blur', () => {
            textNode.contentEditable = 'false'
            element.text = textNode.textContent || 'Text'
            state.isEditing = false
            renderProperties()
          })
          textNode.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
              event.preventDefault()
              textNode.blur()
            }
          })

          stage.appendChild(node)
        })
      }

  function beginEditingText(elementId) {
    const node = stage.querySelector(`[data-element="${elementId}"]`)
    if (!node) return
    const textNode = node.querySelector('.stage-text')
    if (!textNode) return
    state.isEditing = true
    textNode.contentEditable = 'true'
    textNode.focus()
    const range = document.createRange()
    range.selectNodeContents(textNode)
    const selection = window.getSelection()
    selection.removeAllRanges()
    selection.addRange(range)
  }

      function stageBounds(node) {
        const rect = stage.getBoundingClientRect()
        const width = node.offsetWidth
        const height = node.offsetHeight
        return { rect, width, height }
      }

      function startDrag(event, element, node) {
        if (state.isEditing || event.target.isContentEditable) return
        event.preventDefault()
        state.selected = element.id
        node.dataset.selected = 'true'
        renderProperties()
        const startX = event.clientX
        const startY = event.clientY
        const originX = element.x
        const originY = element.y
        const { rect, width, height } = stageBounds(node)

        function onMove(moveEvent) {
          if (state.isEditing) {
            onUp()
            return
          }
          const deltaX = moveEvent.clientX - startX
          const deltaY = moveEvent.clientY - startY
          let nextX = originX + deltaX
          let nextY = originY + deltaY
          nextX = Math.max(0, Math.min(nextX, rect.width - width))
          nextY = Math.max(0, Math.min(nextY, rect.height - height))
          element.x = nextX
          element.y = nextY
          node.style.left = `${nextX}px`
          node.style.top = `${nextY}px`
        }

        function onUp() {
          document.removeEventListener('mousemove', onMove)
          document.removeEventListener('mouseup', onUp)
        }

        document.addEventListener('mousemove', onMove)
        document.addEventListener('mouseup', onUp)
      }

      function renderProperties() {
        if (!state.selected) {
          propertiesContent.innerHTML = '<div class="text-center py-8 text-sm text-slate-400">Select an element to edit properties</div>'
          propertiesSubtitle.textContent = 'No selection'
          return
        }

        const slide = state.slides[state.current]
        const element = slide.elements.find((el) => el.id === state.selected)
        if (!element) {
          propertiesContent.innerHTML = '<div class="text-center py-8 text-sm text-slate-400">Select an element to edit properties</div>'
          propertiesSubtitle.textContent = 'No selection'
          return
        }

        if (element.type === 'text') {
          propertiesSubtitle.textContent = 'Text element'
          propertiesContent.innerHTML = `
            <div class="space-y-4">
              <div>
                <label class="mb-1.5 block text-xs font-medium text-slate-600">Font family</label>
                <select id="prop-font-family" class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 focus:border-emerald-400 focus:outline-none focus:ring-1 focus:ring-emerald-400">
                  <option value="Inter, sans-serif">Inter</option>
                  <option value="Arial, sans-serif">Arial</option>
                  <option value="Georgia, serif">Georgia</option>
                  <option value="'Courier New', monospace">Courier New</option>
                  <option value="'Times New Roman', serif">Times New Roman</option>
                </select>
              </div>
              <div>
                <label class="mb-1.5 block text-xs font-medium text-slate-600">Font size</label>
                <div class="flex items-center gap-2">
                  <input id="prop-font-size" type="number" min="8" max="200" value="${element.fontSize || 16}" class="flex-1 rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 focus:border-emerald-400 focus:outline-none focus:ring-1 focus:ring-emerald-400" />
                  <span class="text-xs text-slate-500">px</span>
                </div>
              </div>
              <div>
                <label class="mb-1.5 block text-xs font-medium text-slate-600">Font weight</label>
                <select id="prop-font-weight" class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 focus:border-emerald-400 focus:outline-none focus:ring-1 focus:ring-emerald-400">
                  <option value="300" ${(element.fontWeight || 600) === 300 ? 'selected' : ''}>Light</option>
                  <option value="400" ${(element.fontWeight || 600) === 400 ? 'selected' : ''}>Regular</option>
                  <option value="600" ${(element.fontWeight || 600) === 600 ? 'selected' : ''}>Semibold</option>
                  <option value="700" ${(element.fontWeight || 600) === 700 ? 'selected' : ''}>Bold</option>
                </select>
              </div>
              <div>
                <label class="mb-1.5 block text-xs font-medium text-slate-600">Text color</label>
                <div class="flex items-center gap-2">
                  <input id="prop-text-color" type="color" value="${element.color || '#1f2937'}" class="h-10 w-16 rounded-lg border border-slate-200 cursor-pointer" />
                  <input id="prop-text-color-hex" type="text" value="${element.color || '#1f2937'}" class="flex-1 rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs text-slate-700 focus:border-emerald-400 focus:outline-none focus:ring-1 focus:ring-emerald-400" />
                </div>
              </div>
              <div>
                <label class="mb-1.5 block text-xs font-medium text-slate-600">Text align</label>
                <div class="grid grid-cols-3 gap-2">
                  <button data-align="left" class="prop-align-btn rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-medium text-slate-600 transition hover:border-emerald-400 hover:bg-emerald-50 ${(element.textAlign || 'left') === 'left' ? 'border-emerald-400 bg-emerald-50' : ''}">Left</button>
                  <button data-align="center" class="prop-align-btn rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-medium text-slate-600 transition hover:border-emerald-400 hover:bg-emerald-50 ${(element.textAlign || 'left') === 'center' ? 'border-emerald-400 bg-emerald-50' : ''}">Center</button>
                  <button data-align="right" class="prop-align-btn rounded-lg border border-slate-200 bg-white px-3 py-2 text-xs font-medium text-slate-600 transition hover:border-emerald-400 hover:bg-emerald-50 ${(element.textAlign || 'left') === 'right' ? 'border-emerald-400 bg-emerald-50' : ''}">Right</button>
                </div>
              </div>
            </div>
          `
          
          // Set current values
          const fontFamilySelect = document.getElementById('prop-font-family')
          if (element.fontFamily) fontFamilySelect.value = element.fontFamily
          
          // Event listeners
          fontFamilySelect?.addEventListener('change', (e) => {
            element.fontFamily = e.target.value
            renderStage()
          })
          
          document.getElementById('prop-font-size')?.addEventListener('input', (e) => {
            element.fontSize = parseInt(e.target.value) || 16
            renderStage()
          })
          
          document.getElementById('prop-font-weight')?.addEventListener('change', (e) => {
            element.fontWeight = parseInt(e.target.value) || 600
            renderStage()
          })
          
          const colorInput = document.getElementById('prop-text-color')
          const colorHexInput = document.getElementById('prop-text-color-hex')
          
          colorInput?.addEventListener('input', (e) => {
            element.color = e.target.value
            colorHexInput.value = e.target.value
            renderStage()
          })
          
          colorHexInput?.addEventListener('input', (e) => {
            const val = e.target.value
            if (/^#[0-9A-F]{6}$/i.test(val)) {
              element.color = val
              colorInput.value = val
              renderStage()
            }
          })
          
          document.querySelectorAll('.prop-align-btn').forEach((btn) => {
            btn.addEventListener('click', () => {
              element.textAlign = btn.dataset.align
              renderProperties()
              renderStage()
            })
          })
        }
      }

      function addTextElement() {
        const slide = state.slides[state.current]
        const id = `el-${++state.counter}`
        slide.elements.push({ 
          id, 
          type: 'text', 
          text: 'Click to edit', 
          x: 120, 
          y: 120,
          fontSize: 16,
          fontFamily: 'Inter, sans-serif',
          fontWeight: 600,
          color: '#1f2937',
          textAlign: 'left'
        })
        state.selected = id
        renderStage()
        renderProperties()
        requestAnimationFrame(() => beginEditingText(id))
      }

      function addSlide() {
        const id = `slide-${state.slides.length + 1}`
        state.slides.push({ id, elements: [] })
        state.isEditing = false
        state.current = state.slides.length - 1
        state.selected = null
        renderSlides()
        renderStage()
        renderProperties()
      }

      stage.addEventListener('mousedown', (event) => {
        if (event.target === stage || event.target === stagePlaceholder) {
          state.isEditing = false
          state.selected = null
          renderStage()
          renderProperties()
        }
      })

      addTextBtn?.addEventListener('click', addTextElement)
      addSlideBtn?.addEventListener('click', addSlide)

      renderSlides()
      renderStage()
      renderProperties()
    </script>
  </body>
  </html>

